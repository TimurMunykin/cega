(()=>{"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))},t=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};function n(n,o){return e(this,void 0,void 0,(function(){var e,r;return t(this,(function(t){switch(t.label){case 0:e="https://api.openai.com/v1/engines/text-davinci-003/completions",t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({prompt:o,max_tokens:500,n:1,stop:null,temperature:.5})})];case 2:return[4,t.sent().json()];case 3:return[2,t.sent().choices[0].text];case 4:return r=t.sent(),console.error("Error fetching emoji suggestions:",r),[2,[]];case 5:return[2]}}))}))}function o(n,o,r){return e(this,void 0,void 0,(function(){var e,a,i,c,s,l;return t(this,(function(t){switch(t.label){case 0:e="https://api.openai.com/v1/engines/text-davinci-003/completions",a='Given the text "'.concat(n,'"suggest three emojis (unicode characters) that are related to the text, along with a brief explanation for each. Awnser in ').concat(o),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({prompt:a,max_tokens:750,n:1,stop:null,temperature:.5})})];case 2:return[4,t.sent().json()];case 3:return i=t.sent(),c=i.choices[0].text,s=c.trim().split("\n").slice(0,3).map((function(e){var t=e.split(": "),n=t[0],o=t[1];return{emoji:n.replace(/ *\([^)]*\) */,""),explanation:o}})),[2,s];case 4:return l=t.sent(),console.error("Error fetching emoji suggestions:",l),[2,[]];case 5:return[2]}}))}))}function r(){var e=window.getSelection();return e&&e.rangeCount>0?e.getRangeAt(0):null}function a(){var e=window.getSelection();return e?e.toString().trim():null}chrome.runtime.onMessage.addListener((function(i,c,s){"fetchSelectedTextAndDisplayEmojis"===i.command?function(){e(this,void 0,void 0,(function(){var e,n,i,c;return t(this,(function(t){switch(t.label){case 0:return(e=a())?[4,chrome.storage.sync.get("language")]:[3,4];case 1:return n=t.sent().language||"English",[4,chrome.storage.sync.get("apikey")];case 2:return i=t.sent().apikey,[4,o(e,n,i)];case 3:(c=t.sent())&&function(e){var t=r();if(t){var n=t.getBoundingClientRect(),o=document.createElement("div");o.style.position="absolute",o.style.top="".concat(n.top+window.scrollY-50,"px"),o.style.left="".concat(n.left+window.scrollX,"px"),o.style.backgroundColor="#ffffff",o.style.border="1px solid #cccccc",o.style.borderRadius="5px",o.style.padding="10px",o.style.zIndex="9999",o.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",o.style.width="300px",e.forEach((function(e){var t=e.emoji,n=e.explanation,r=document.createElement("span");r.textContent=t,r.style.fontSize="14px",r.style.marginRight="8px";var a=document.createElement("span");a.textContent=n,a.style.fontSize="14px";var i=document.createElement("div");i.style.marginBottom="5px",i.appendChild(r),i.appendChild(a),o.appendChild(i)}));var a=document.createElement("button");a.textContent="×",a.style.position="absolute",a.style.top="5px",a.style.right="5px",a.style.border="none",a.style.background="none",a.style.fontSize="18px",a.style.cursor="pointer",a.style.padding="0",a.style.lineHeight="1",a.style.color="#999999",a.addEventListener("click",(function(){o.remove()})),o.appendChild(a),document.body.appendChild(o)}}(c),t.label=4;case 4:return[2]}}))}))}():function(o){e(this,void 0,void 0,(function(){var e,i,c,s;return t(this,(function(t){switch(t.label){case 0:return(e=a())?[4,chrome.storage.sync.get("language")]:[3,4];case 1:return i=t.sent().language||"English",[4,chrome.storage.sync.get("apikey")];case 2:switch(c=t.sent().apikey,s="",o){case"polite":s='Given the text "'.concat(e,'" makes it more polite. Awnser in ').concat(i);break;case"aggresive":s='Given the text "'.concat(e,'" makes it more aggresive. Awnser in ').concat(i);break;case"motivation":s='Given the text "'.concat(e,'" makes it more motivated. Awnser in ').concat(i);break;case"articleTitle":s='Make a title for article:"'.concat(e,'". Awnser in ').concat(i);break;case"summary":s='Make summary for "'.concat(e,'". Awnser in ').concat(i);break;case"sell":s='Make this text more salesly: "'.concat(e,'". Awnser in ').concat(i)}return[4,n(c,s)];case 3:(function(e){var t=r();if(t){var n=t.getBoundingClientRect(),o=document.createElement("div");o.style.position="absolute",o.style.top="".concat(n.top+window.scrollY-50,"px"),o.style.left="".concat(n.left+window.scrollX,"px"),o.style.backgroundColor="#ffffff",o.style.border="1px solid #cccccc",o.style.borderRadius="5px",o.style.padding="10px",o.style.zIndex="9999",o.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",o.style.width="500px",o.textContent=e;var a=document.createElement("button");a.textContent="×",a.style.position="absolute",a.style.top="5px",a.style.right="5px",a.style.border="none",a.style.background="none",a.style.fontSize="18px",a.style.cursor="pointer",a.style.padding="0",a.style.lineHeight="1",a.style.color="#999999",a.addEventListener("click",(function(){o.remove()})),o.appendChild(a),document.body.appendChild(o)}})(t.sent()),t.label=4;case 4:return[2]}}))}))}(i.command)}))})();